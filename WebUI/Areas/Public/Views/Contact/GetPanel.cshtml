@using Kendo.Mvc.UI
@model WebUI.Areas.Public.Models.ContactVm

<div class="row">
    <div class="col-lg-12">
        <h2 style="text-align: center">Хотите работать с нами - пишите!</h2>
        <input style="display: none" id="6LcF9RMTAAAAAAqZIAAovrDAwWUV_sxSUkRuL5Bs" hidden="hidden" value="6LcF9RMTAAAAAAqZIAAovrDAwWUV_sxSUkRuL5Bs" />
        <form method="POST" action="@Url.Action("Create", "Contact", new {area = "Public"})" class="base-form" id="contact-form">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="group">
                                <textarea name="Message" required>@Model.Message</textarea>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Сообщение</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="group">
                                <input type="text" name="Name" required />
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Имя</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="group">
                                <input type="text" name="Email" required />
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>E-mail</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="group">
                                <input type="text" name="Phone" required />
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Телефон</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 col-centered">
                    <div class="g-recaptcha" data-size="normal" data-sitekey="6LcF9RMTAAAAAAqZIAAovrDAwWUV_sxSUkRuL5Bs"></div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-3 col-centered">
                    <input type="submit" class="btn btn-default btn-form-submit" value="Отправить" />
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#contact-form').submit(function (e) {
            e.preventDefault();

            console.log('Form on submit');

            $.ajax({
                url: $('#contact-form').attr('action'),
                data: $('#contact-form').serialize(),
                method: 'POST',
                success: function (data) {
                    console.log(data);
                    switch(data.Status) {
                        case 500:
                            //Model state doesn't valid
                            $.bootstrapGrowl("Форма заполнена неверно. Все поля обязательны для заполнения", { type: 'danger' });
                            break;
                        case 501:
                            //Captcha doesn't valid
                            $.bootstrapGrowl("Пожалуйста пройдите проверку от спама \"Я не робот\".", { type: 'danger' });
                            break;
                        case 200:
                            document.location.reload();
                            break;
                    }
                }
            });
        });
    });
</script>
